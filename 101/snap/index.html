
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.3.0, mkdocs-material-8.3.6" name="generator"/>
<title>SNAP 101 - Guide for CWL in Earth Observation</title>
<link href="../../assets/stylesheets/main.4a0965b7.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.cbb835fc.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="https://unpkg.com/mermaid@8.8.0/dist/mermaid.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#snap-101">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Guide for CWL in Earth Observation" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Guide for CWL in Earth Observation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Guide for CWL in Earth Observation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              SNAP 101
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Guide for CWL in Earth Observation" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Guide for CWL in Earth Observation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Guide for CWL in Earth Observation
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../requirements/">
        Requirements
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
          What you need to know
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="What you need to know" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          What you need to know
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../cwl-101/cwl/">
        CWL 101
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../yaml/">
        YAML 101
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../containers/">
        Containers 101
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Tutorials" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../cwl-101/tutorial-1/quickwin/">
        QuickWin
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" id="__nav_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2">
          Step-by-step
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Step-by-step" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
          Step-by-step
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../cwl-101/tutorial-2/command-line-tool/">
        Your first CommandLineTool
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cwl-101/tutorial-2/workflow/">
        Your first Workflow
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" id="__nav_4_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_3">
          Slow pace
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Slow pace" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
          Slow pace
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../cwl-101/tutorial-3/bash-script/">
        Bash script
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cwl-101/tutorial-3/tool-wrappers/">
        Writing the Tool Wrappers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cwl-101/tutorial-3/workflow-composition/">
        Workflow composition
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cwl-101/tutorial-3/workflow-run/">
        Running and debugging
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cwl-101/tutorial-3/sub-workflow/">
        Processing multiple inputs
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" id="__nav_4_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_4">
          SNAP
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="SNAP" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_4">
<span class="md-nav__icon md-icon"></span>
          SNAP
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../snap/snap-cwl/snap-cwl/">
        SNAP with CWL
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../snap/snap-cwl/graph-as-a-file/">
        SNAP Graph as File
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../snap/snap-cwl/graph-inline/">
        SNAP Graph inline
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" id="__nav_4_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_5">
          OrfeoToolbox
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="OrfeoToolbox" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
          OrfeoToolbox
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../orfeo-toolbox/">
        Orfeo Toolbox 101
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../otb/bandmathx/">
        BandMathX
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../otb/landsat-8-pan-sharpening/">
        BundleToPerfectSensor
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../otb/landsat-8-mosaic/">
        Mosaic
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6" id="__nav_4_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6">
          GDAL
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="GDAL" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_6">
<span class="md-nav__icon md-icon"></span>
          GDAL
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../gdal/">
        GDAL 101
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../gdal/gdal_translate/">
        gdal_translate
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_7" id="__nav_4_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_7">
          STAC
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="STAC" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_7">
<span class="md-nav__icon md-icon"></span>
          STAC
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../stac/">
        Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../stac/sentinel-2-asset-resolution/">
        Sentinel-2 asset resolution
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5">
          How-to
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="How-to" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          How-to
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" id="__nav_5_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_1">
          CWL
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="CWL" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_1">
<span class="md-nav__icon md-icon"></span>
          CWL
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/cwl-how-to/01-output/return-output-file/">
        How to return an output file
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/cwl-how-to/02-stdout/capture-stdout/">
        How to capture the stdout
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/cwl-how-to/03-json-stdout/capture-json-stdout/">
        How to capture JSON stdout and re-use it
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/cwl-how-to/04-env/environment-variable/">
        How to set environment variable
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/cwl-how-to/05-runtime/create-file-at-runtime/">
        How to create a file at runtime
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/cwl-how-to/06-nested-workflows/nested-workflow/">
        How to create nested workflows
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/cwl-how-to/07-scatter-workflows/scatter-input-parameters/">
        How to scatter on input parameters
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/cwl-how-to/08-conditional-workflows/conditional-workflows/">
        How to create conditional workflows
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/cwl-how-to/09-inline-python/inline-python.md">
        How to run inline Python code
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" id="__nav_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_2">
          Sentinel-2
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Sentinel-2" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
          Sentinel-2
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../workflows/sentinel-2-nbr/">
        Sentinel-2 NBR
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" id="__nav_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_3">
          Landsat-8
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Landsat-8" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_3">
<span class="md-nav__icon md-icon"></span>
          Landsat-8
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../otb/landsat-8-pan-sharpening/">
        Pan-sharpening with OTB
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../otb/landsat-8-mosaic/">
        True color mosaic
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6">
          Reference
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Reference" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Reference
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/cwl-clt/">
        CWL Command Line Tool Description
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/cwl-workflow/">
        CWL Workflow Description
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7">
          Explanation
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Explanation" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          Explanation
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../snap/101/">
        SNAP
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#graph-processing-framework">
    Graph Processing Framework
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#calling-gpt-with-a-graph">
    Calling GPT with a Graph
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#creating-a-graph-file">
    Creating a Graph File
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#batch-processing">
    Batch processing
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="snap-101">SNAP 101</h1>
<h2 id="graph-processing-framework">Graph Processing Framework</h2>
<p>The SNAP architecture provides a flexible Graph Processing Framework (GPF) allowing the creation of processing graphs for batch processing
and customized processing chains.</p>
<p>A graph is a set of nodes connected by edges. In this case, the nodes are the processing steps called operators. The edges will show the direction in which the data is being passed between nodes; therefore it will be a directed graph. A graph can have no loops or cycles, so it will be a Directed Acyclic Graph (DAG).</p>
<p>The sources of the graph will be the data product readers, and the sinks can be either a product writer or an image displayed. An operator can
have one or more image sources and other parameters that define the operation. Two or more operators may be connected together so that the first operator becomes an image source to the next operator. By linking one operator to another, an imaging graph or processing chain can be created</p>
<p>The graph processor will not introduce any intermediate files unless a writer is optionally added anywhere in the sequence. </p>
<p>Graphs offer the following advantages:
- no intermediate files written, no I/O overhead
- reusability of processing chains
- simple and comprehensive operator configuration
- reusability of operator configurations</p>
<p>SNAP EO Data Processors are implemented as GPF operators and can be invoked using the GPF Graph Processing Tool <code>gpt</code> which can be found in the bin directory of a SNAP installation.</p>
<p>The following command will dump the <code>gpt</code> print out a short description of what the tool is for and describes the arguments and options of
the tool. A list of available operators is displayed according to the toolboxes installed.</p>
<div class="highlight"><pre><span></span><code><span class="go">docker run --rm docker.io/snap-gpt gpt -h</span>
</code></pre></div>
<p>The partial output: </p>
<div class="highlight"><pre><span></span><code>Usage:
  gpt &lt;op&gt;|&lt;graph-file&gt; [options] [&lt;source-file-1&gt; &lt;source-file-2&gt; ...]

Description:
  This tool is used to execute SNAP raster data operators in batch-mode. The
  operators can be used stand-alone or combined as a directed acyclic graph
  (DAG). Processing graphs are represented using XML. More info about
  processing graphs, the operator API, and the graph XML format can be found
  in the SNAP documentation.

Arguments:
  &lt;op&gt;               Name of an operator. See below for the list of &lt;op&gt;s.
  &lt;graph-file&gt;       Operator graph file (XML format).
  &lt;source-file-i&gt;    The &lt;i&gt;th source product file. The actual number of source
                     file arguments is specified by &lt;op&gt;. May be optional for
                     operators which use the -S option.

Options:
  -h                 Displays command usage. If &lt;op&gt; is given, the specific
                     operator usage is displayed.
  -e                 Displays more detailed error messages. Displays a stack
                     trace, if an exception occurs.
  -t &lt;file&gt;          The target file. Default value is 'target.dim'.
  -f &lt;format&gt;        Output file format, e.g. 'GeoTIFF', 'HDF5',
                     'BEAM-DIMAP'. If not specified, format will be derived
                     from the target filename extension, if any, otherwise the
                     default format is 'BEAM-DIMAP'. Ony used, if the graph
                     in &lt;graph-file&gt; does not specify its own 'Write'
                     operator.
  -p &lt;file&gt;          A (Java Properties) file containing processing parameters
                     in the form &lt;name&gt;=&lt;value&gt; or a XML file containing a
                     parameter DOM for the operator. Entries in this file are
                     overwritten by the -P&lt;name&gt;=&lt;value&gt; command-line option
                     (see below). The following variables are substituted in
                     the parameters file:
                         ${system.&lt;java-sys-property&gt;}
                         ${operatorName} (given by the &lt;op&gt; argument)
                         ${graphFile} (given by the &lt;graph-file&gt; argument)
                         ${targetFile} (pull path given by the -t option)
                         ${targetDir} (derived from -t option)
                         ${targetName} (derived from -t option)
                         ${targetBaseName} (derived from -t option)
                         ${targetFormat} (given by the -f option)
  -c &lt;cache-size&gt;    Sets the tile cache size in bytes. Value can be suffixed
                     with 'K', 'M' and 'G'. Must be less than maximum
                     available heap space. If equal to or less than zero, tile
                     caching will be completely disabled. The default tile
                     cache size is '1,073,741,824M'.
  -q &lt;parallelism&gt;   Sets the maximum parallelism used for the computation,
                     i.e. the maximum number of parallel (native) threads.
                     The default parallelism is '16'.
  -x                 Clears the internal tile cache after writing a complete
                     row of tiles to the target product file. This option may
                     be useful if you run into memory problems.
  -S&lt;source&gt;=&lt;file&gt;  Defines a source product. &lt;source&gt; is specified by the
                     operator or the graph. In an XML graph, all occurrences of
                     ${&lt;source&gt;} will be replaced with references to a source
                     product located at &lt;file&gt;.
  -P&lt;name&gt;=&lt;value&gt;   Defines a processing parameter, &lt;name&gt; is specific for the
                     used operator or graph. In an XML graph, all occurrences
                     of ${&lt;name&gt;} will be replaced with &lt;value&gt;. Overwrites
                     parameter values specified by the '-p' option.
  -D&lt;name&gt;=&lt;value&gt;   Defines a system property for this invocation.
  -v &lt;dir&gt;           A directory containing any number of Velocity templates.
                     Each template generates a text output file along with the
                     target product. This feature has been added to support a
                     flexible generation of metadata files.
                     See http://velocity.apache.org/ and option -m.
  -m &lt;file&gt;          A (Java Properties) file containing (constant) metadata
                     in the form &lt;name&gt;=&lt;value&gt; or any XML file. Its primary 
                     usage is to provide an additional context to be used
                     from within the Velocity templates. See option -v.
  --diag             Displays version and diagnostic information.
Operators:
  Aatsr.SST                             Computes sea surface temperature (SST) from (A)ATSR products.
  AATSR.Ungrid                          Ungrids (A)ATSR L1B products and extracts geolocation and pixel field of view data.
  AdaptiveThresholding                  Detect ships using Constant False Alarm Rate detector.
  AddElevation                          Creates a DEM band
...
  Warp                                  Create Warp Function And Get Co-registrated Images
  WdviOp                                Weighted Difference Vegetation Index retrieves the Isovegetation lines parallel to soil line. Soil line has an arbitrary slope and passes through origin
  Wind-Field-Estimation                 Estimate wind speed and direction
  Write                                 Writes a data product to a file.
</code></pre></div>
<p>The <code>gpt</code> can process individual operators or a graph of connected operators.</p>
<p>Type:</p>
<div class="highlight"><pre><span></span><code><span class="go">docker run --rm docker.io/snap-gpt gpt &lt;operator-name&gt; –h</span>
</code></pre></div>
<p>to get usage information of an operator provided via <code>&lt;operator-name&gt;</code>. </p>
<p>The usage text of an operator also displays an XML template clipping of the operators configuration when used in a graph.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>docker run --rm docker.io/snap-gpt gpt Calibration –h
</code></pre></div>
<p>This outputs:</p>
<div class="highlight"><pre><span></span><code><span class="go">Usage:</span>
<span class="go">  gpt Calibration [options] </span>

<span class="go">Description:</span>
<span class="go">  Calibration of products</span>


<span class="go">Source Options:</span>
<span class="go">  -Ssource=&lt;file&gt;    Sets source 'source' to &lt;filepath&gt;.</span>
<span class="go">                     This is a mandatory source.</span>

<span class="go">Parameter Options:</span>
<span class="go">  -PauxFile=&lt;string&gt;                                    The auxiliary file</span>
<span class="go">                                                        Value must be one of 'Latest Auxiliary File', 'Product Auxiliary File', 'External Auxiliary File'.</span>
<span class="go">                                                        Default value is 'Latest Auxiliary File'.</span>
<span class="go">  -PcreateBetaBand=&lt;boolean&gt;                            Create beta0 virtual band</span>
<span class="go">                                                        Default value is 'false'.</span>
<span class="go">  -PcreateGammaBand=&lt;boolean&gt;                           Create gamma0 virtual band</span>
<span class="go">                                                        Default value is 'false'.</span>
<span class="go">  -PexternalAuxFile=&lt;file&gt;                              The antenna elevation pattern gain auxiliary data file.</span>
<span class="go">  -PoutputBetaBand=&lt;boolean&gt;                            Output beta0 band</span>
<span class="go">                                                        Default value is 'false'.</span>
<span class="go">  -PoutputGammaBand=&lt;boolean&gt;                           Output gamma0 band</span>
<span class="go">                                                        Default value is 'false'.</span>
<span class="go">  -PoutputImageInComplex=&lt;boolean&gt;                      Output image in complex</span>
<span class="go">                                                        Default value is 'false'.</span>
<span class="go">  -PoutputImageScaleInDb=&lt;boolean&gt;                      Output image scale</span>
<span class="go">                                                        Default value is 'false'.</span>
<span class="go">  -PoutputSigmaBand=&lt;boolean&gt;                           Output sigma0 band</span>
<span class="go">                                                        Default value is 'true'.</span>
<span class="go">  -PselectedPolarisations=&lt;string,string,string,...&gt;    The list of polarisations</span>
<span class="go">  -PsourceBands=&lt;string,string,string,...&gt;              The list of source bands.</span>

<span class="go">Graph XML Format:</span>
<span class="go">  &lt;graph id="someGraphId"&gt;</span>
<span class="go">    &lt;version&gt;1.0&lt;/version&gt;</span>
<span class="go">    &lt;node id="someNodeId"&gt;</span>
<span class="go">      &lt;operator&gt;Calibration&lt;/operator&gt;</span>
<span class="go">      &lt;sources&gt;</span>
<span class="go">        &lt;source&gt;${source}&lt;/source&gt;</span>
<span class="go">      &lt;/sources&gt;</span>
<span class="go">      &lt;parameters&gt;</span>
<span class="go">        &lt;sourceBands&gt;string,string,string,...&lt;/sourceBands&gt;</span>
<span class="go">        &lt;auxFile&gt;string&lt;/auxFile&gt;</span>
<span class="go">        &lt;externalAuxFile&gt;file&lt;/externalAuxFile&gt;</span>
<span class="go">        &lt;outputImageInComplex&gt;boolean&lt;/outputImageInComplex&gt;</span>
<span class="go">        &lt;outputImageScaleInDb&gt;boolean&lt;/outputImageScaleInDb&gt;</span>
<span class="go">        &lt;createGammaBand&gt;boolean&lt;/createGammaBand&gt;</span>
<span class="go">        &lt;createBetaBand&gt;boolean&lt;/createBetaBand&gt;</span>
<span class="go">        &lt;selectedPolarisations&gt;string,string,string,...&lt;/selectedPolarisations&gt;</span>
<span class="go">        &lt;outputSigmaBand&gt;boolean&lt;/outputSigmaBand&gt;</span>
<span class="go">        &lt;outputGammaBand&gt;boolean&lt;/outputGammaBand&gt;</span>
<span class="go">        &lt;outputBetaBand&gt;boolean&lt;/outputBetaBand&gt;</span>
<span class="go">      &lt;/parameters&gt;</span>
<span class="go">    &lt;/node&gt;</span>
<span class="go">  &lt;/graph&gt;</span>
</code></pre></div>
<h2 id="calling-gpt-with-a-graph">Calling GPT with a Graph</h2>
<p>Rather than calling each operator and specifying all its parameters, it is more convenient to pass the
required settings in an XML-encoded graph file.</p>
<p>To run gpt on a graph file type:</p>
<div class="highlight"><pre><span></span><code><span class="go">gpt &lt;GraphFile.xml&gt; [options] [&lt;source-file-1&gt; &lt;source-file-2&gt; ...]</span>
</code></pre></div>
<h2 id="creating-a-graph-file">Creating a Graph File</h2>
<p>The basic format of a graph XML file is:</p>
<div class="highlight"><pre><span></span><code> <span class="nt">&lt;graph</span> <span class="na">id=</span><span class="s">"someGraphId"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
 <span class="nt">&lt;node</span> <span class="na">id=</span><span class="s">"someNodeId"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;operator&gt;</span>OperatorName<span class="nt">&lt;/operator&gt;</span>
 <span class="nt">&lt;sources&gt;</span>
<span class="nt">&lt;sourceProducts&gt;</span>${sourceProducts}<span class="nt">&lt;/sourceProducts&gt;</span>
 <span class="nt">&lt;/sources&gt;</span>
 <span class="nt">&lt;parameters&gt;</span>
 ....
 <span class="nt">&lt;/parameters&gt;</span>
 <span class="nt">&lt;/node&gt;</span>
 <span class="nt">&lt;/graph&gt;</span>
 ```

Insert variables in the form `${variableName}` in place of a parameter value. `variableName` is then replaced with a value at the command line. 

For example, if a parameter for a file included the variable for `${myFilename}`

```xml
<span class="nt">&lt;parameters&gt;</span>
 <span class="nt">&lt;file&gt;</span>${myFilename}<span class="nt">&lt;/file&gt;</span>
<span class="nt">&lt;/parameters&gt;</span>
</code></pre></div>
<p><code>gpt</code> is then invoked with:</p>
<div class="highlight"><pre><span></span><code><span class="go">gpt mygraph.xml –PmyFilename=pathToMyFile</span>
</code></pre></div>
<h2 id="batch-processing">Batch processing</h2>
<p>SNAP users often resort to scripts to batch process their SNAP graphs. Below two examples of such scripts:</p>
<p><strong>For all envisat products in folder c:\ASAR run gpt Calibration and produce the output in the folder <code>c:\output</code></strong></p>
<div class="highlight"><pre><span></span><code><span class="go">for /r "c:\ASAR" %%X in (*.N1) do (gpt Calibration "%%X" -t "C:\output\%%~nX.dim")</span>
</code></pre></div>
<p><strong>A set of input Sentinel-2 products shall be processed with the Resample processor.</strong></p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># enable next line for debugging purpose</span>
<span class="c1"># set -x </span>

<span class="c1">############################################</span>
<span class="c1"># User Configuration</span>
<span class="c1">############################################</span>

<span class="c1"># adapt this path to your needs</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>~/progs/snap/bin:<span class="nv">$PATH</span>
<span class="nv">gptPath</span><span class="o">=</span><span class="s2">"gpt"</span>

<span class="c1">############################################</span>
<span class="c1"># Command line handling</span>
<span class="c1">############################################</span>

<span class="c1"># first parameter is a path to the graph xml</span>
<span class="nv">graphXmlPath</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>

<span class="c1"># second parameter is a path to a parameter file</span>
<span class="nv">parameterFilePath</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>

<span class="c1"># use third parameter for path to source products</span>
<span class="nv">sourceDirectory</span><span class="o">=</span><span class="s2">"</span><span class="nv">$3</span><span class="s2">"</span>

<span class="c1"># use fourth parameter for path to target products</span>
<span class="nv">targetDirectory</span><span class="o">=</span><span class="s2">"</span><span class="nv">$4</span><span class="s2">"</span>

<span class="c1"># the fifth parameter is a file prefix for the target product name, typically indicating the type of processing</span>
<span class="nv">targetFilePrefix</span><span class="o">=</span><span class="s2">"</span><span class="nv">$5</span><span class="s2">"</span>


<span class="c1">############################################</span>
<span class="c1"># Helper functions</span>
<span class="c1">############################################</span>
removeExtension<span class="o">()</span> <span class="o">{</span>
    <span class="nv">file</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="s2">"</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$file</span><span class="s2">"</span> <span class="p">|</span> sed -r <span class="s1">'s/\.[^\.]*$//'</span><span class="k">)</span><span class="s2">"</span>
<span class="o">}</span>


<span class="c1">############################################</span>
<span class="c1"># Main processing</span>
<span class="c1">############################################</span>

<span class="c1"># Create the target directory</span>
mkdir -p <span class="s2">"</span><span class="si">${</span><span class="nv">targetDirectory</span><span class="si">}</span><span class="s2">"</span>

<span class="c1"># the d option limits the elemeents to loop over to directories. Remove it, if you want to use files.</span>
<span class="k">for</span> F <span class="k">in</span> <span class="k">$(</span>ls -1d <span class="s2">"</span><span class="si">${</span><span class="nv">sourceDirectory</span><span class="si">}</span><span class="s2">"</span>/S2*.SAFE<span class="k">)</span><span class="p">;</span> <span class="k">do</span>
  <span class="nv">sourceFile</span><span class="o">=</span><span class="s2">"</span><span class="k">$(</span>realpath <span class="s2">"</span><span class="nv">$F</span><span class="s2">"</span><span class="k">)</span><span class="s2">"</span>
  <span class="nv">targetFile</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">targetDirectory</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">targetFilePrefix</span><span class="si">}</span><span class="s2">_</span><span class="k">$(</span>removeExtension <span class="s2">"</span><span class="k">$(</span>basename <span class="si">${</span><span class="nv">F</span><span class="si">}</span><span class="k">)</span><span class="s2">"</span><span class="k">)</span><span class="s2">.dim"</span>
  <span class="si">${</span><span class="nv">gptPath</span><span class="si">}</span> <span class="si">${</span><span class="nv">graphXmlPath</span><span class="si">}</span> -e -p <span class="si">${</span><span class="nv">parameterFilePath</span><span class="si">}</span> -t <span class="si">${</span><span class="nv">targetFile</span><span class="si">}</span> <span class="si">${</span><span class="nv">sourceFile</span><span class="si">}</span>
<span class="k">done</span>
</code></pre></div>
<p>While these are valid approaches, these scripts are not portable and hardly shareable.</p>
<p>Jump to <insert cross="" link=""> to learn how CWL can be used to process SNAP graphs.</insert></p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.85cb4492.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.a877e258.min.js"></script>
<script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script>
</body>
</html>